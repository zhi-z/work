# msOS移植

## 1 简介

原版的msOS主要是基于STM32F103上实现的，本次移植主要是把msOS系统移植到GD32F130上。

## 2 移植过程

### 2.1 库替换

把带有原版外设库中带有stm32f10x的替换掉，并把gd32f10x问文件复制到相应的文件夹。替换后的效果如下图所示。

![1532171387701](C:\Users\JH\Desktop\RD总结\assets\1532171387701.png)

替换掉以后，进行编译，会后很多的bug，主要是在Device文件下的c文件，为了简化移植，在Device文件下删除了暂时用不到的驱动，只留下了如上图中的c文件。

### 2.2 其他设置

完成以上的外设库的增加和驱动的删除后，对于删除了的部分，在系统和节拍的初始化当中也要删除掉这部分的初始化。然后进行编译，通过编译，会出现很多的错误，这时候需要通过错误所在的位置进行更改。比如当找到一个错误的函数，这时候我们需要看这个函数在stm32中的作用，并查找在gd32中有相同作用的函数，替换掉。对于stm32与gd32有相同功能的函数，在函数的命名上很多是大概相同的，通过这个相似点可以能够更快的找到替换的函数或者变量。



## 从100多个错误改到0个错误，虽然没有了错误，但是点灯还是没能实现。

# 未完待续

